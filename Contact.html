<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathways to Belonging | Register</title>
    <link rel="stylesheet" href="style/Contact.css">
    <link rel="stylesheet" href="style/Shared.css">
    <script>
        if (sessionStorage.getItem('formSubmitted')) {
            sessionStorage.removeItem('formSubmitted');
            window.location.href = 'Thank-you.html';
        }
    </script>
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>
    
    <header class="header" role="banner">
        <a href="home.html" class="logo-link">
            <img src="images/Youth empowerment logo.png" alt="Pathways to Belonging logo" width="200" height="200">
        </a>
        <h1>Pathways to Belonging</h1>
    </header>

    <div class="container">
        <nav class="navbar col-sm-12" aria-label="Main navigation">
            <ul>
                <li><a href="home.html"><span>üè†</span> Home</a></li>
                <li><a href="about.html"><span>üß≠</span> About</a></li>
                <li><a href="contact.html" class="active"><span>üìù</span> Contact</a></li>
            </ul>
        </nav>

        <main id="main">
            <section class="registration">
                <h2>üìù Register Your Child</h2>
                <p>Complete the form below to register your child for our summer program. Spaces are limited!</p>
                
                <div id="form-fallback" style="display:none; text-align:center; padding:2rem; background:#d4edda; border-radius:8px;">
                    <h2>‚úÖ Form Submitted Successfully</h2>
                    <p>If you're not redirected automatically, <a href="Thank-you.html">click here</a>.</p>
                </div>

                <form id="registration-form"
                    name="registration" 
                    method="POST" 
                    action="Thank-you.html"
                    netlify
                    netlify-honeypot="bot-field">
    
                    <p class="hidden">
                        <label for="bot-field">Leave this field empty if you're human:</label>
                        <input type="text" id="bot-field" name="bot-field">
                    </p>

                    <fieldset>
                        <legend>Parent/Guardian Information</legend>
                        
                        <div class="form-group">
                            <label for="parent-name">Full Name:<span class="required">(required)</span></label>
                            <input type="text" id="parent-name" name="parent-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone Number:<span class="required">(required)</span></label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address: <span class="required">(required)</span></label>
                            <input type="email" id="email" name="email" required aria-required="true">
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Child Information</legend>
                        
                        <div class="form-group">
                            <label for="num-children">Number of Children Registering<span class="required">(required)</span></label>
                            <input type="number" id="num-children" name="num-children" min="1" max="5" value="1" required onchange="updateChildFields()">
                        </div>
                        
                        <div id="child-fields-container">
                            <div class="child-field">
                                <div class="form-group">
                                    <label for="child-name-1">Child's Full Name:<span class="required">(required)</span></label>
                                    <input type="text" id="child-name-1" name="child-name[]" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="child-age-1">Child's Age:<span class="required">(required)</span></label>
                                    <input type="number" id="child-age-1" name="child-age[]" min="6" max="17" required aria-describedby="age-help-1">
                                    <span id="age-help-1" class="help-text">Must be between 6-17 years</span>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <div class="form-group">
                        <label for="additional-info">Additional Information (Allergies, Special Needs, etc.):</label>
                        <textarea id="additional-info" name="additional-info" rows="4"></textarea>
                    </div>

                    <div class="form-actions">
                        <input type="submit" value="Submit Registration" class="button">
                        <input type="reset" value="Clear Form" class="button secondary">
                    </div>
                </form>
            </section>

            <section class="contact-info">
                <h2>Contact Information</h2>
                <p>Have questions about our program or registration? Get in touch!</p>
                
                <div class="contact-methods">
                    <div class="contact-item">
                        <span class="contact-icon" role="img" aria-label="Email">üìß</span>
                        <a href="mailto:Sarahdaoud801@gmail.com">Sarahdaoud801@gmail.com</a>
                    </div>
                    
                    <div class="contact-item">
                        <span class="contact-icon" role="img" aria-label="Phone">üìû</span>
                        <a href="tel:8253656858">(825)-365-6858</a>
                    </div>
                    
                    <div class="contact-item">
                        <span class="contact-icon" role="img" aria-label="Location">üìç</span>
                        <address>Calgary, Alberta</address>
                    </div>
                    
                    <div class="contact-item">
                        <span class="contact-icon" role="img" aria-label="Hours">üïí</span>
                        <p>Monday-Friday: 9:00 AM - 5:00 PM</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <footer class="footer" role="contentinfo">
        <div class="footer-content">
            <p>&copy; 2025 Pathways to Belonging. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function updateChildFields() {
            const numChildren = document.getElementById('num-children').value;
            const container = document.getElementById('child-fields-container');
            
            container.innerHTML = '';
            for (let i = 1; i <= numChildren; i++) {
                const childField = document.createElement('div');
                childField.className = 'child-field';
                if (i > 1) {
                    childField.style.marginTop = '1.5rem';
                    childField.style.paddingTop = '1.5rem';
                    childField.style.borderTop = '1px dashed #ddd';
                }
                
                childField.innerHTML = `
                    <div class="form-group">
                        <label for="child-name-${i}">Child ${i} Full Name:<span class="required">(required)</span></label>
                        <input type="text" id="child-name-${i}" name="child-name[]" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="child-age-${i}">Child ${i} Age:<span class="required">(required)</span></label>
                        <input type="number" id="child-age-${i}" name="child-age[]" min="6" max="17" required>
                    </div>
                `;
                
                container.appendChild(childField);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registration-form');
            const fallback = document.getElementById('form-fallback');
            
            form.addEventListener('submit', function(e) {
                fallback.style.display = 'block';
                form.style.display = 'none';
                
                setTimeout(function() {
                    if (!window.location.href.includes('Thank-you.html')) {
                        fallback.innerHTML += '<p>Still waiting? <a href="Thank-you.html">Click here to continue</a></p>';
                    }
                }, 3000);
            });

            if (window.location.search.includes('form_submitted=true')) {
                window.location.href = 'Thank-you.html';
            }
        });
    </script>
</body>
</html>